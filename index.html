<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>アイヌ民族星文化ビューア ～カムイの星図～</title>

    <!-- レスポンシブ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- d3-celestial の CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/d3-celestial@0.7.35/celestial.css" />
    <!-- 自前の CSS -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div id="site-header-include"></div>

    <main class="layout">
      <section class="controls">
        <div id="loading-indicator" class="loading" aria-live="polite"></div>

        <div class="field">
          <select id="city-select">
            <option value="">……</option>
          </select>
        </div>

        <div id="region-info">星文化地域：未選択</div>

        <div id="area-map-preview" class="area-map-preview" aria-label="エリアマップ">
          <img id="area-map-single" class="area-map-image" alt="エリアマップ" />
          <div id="area-map-stack" class="area-map-stack" aria-hidden="true">
            <img src="img/area1.png" class="area-stack-layer" alt="エリアマップ" />
            <img src="img/area2.png" class="area-stack-layer" alt="エリアマップ" />
            <img src="img/area3.png" class="area-stack-layer" alt="エリアマップ" />
            <img src="img/area4.png" class="area-stack-layer" alt="エリアマップ" />
            <img src="img/area5.png" class="area-stack-layer" alt="エリアマップ" />
            <img src="img/area0.png" class="area-stack-layer area-stack-top" alt="エリアマップ" />
          </div>
        </div>
        <br />

        <!-- 投影法選択プルダウン -->
        <div class="field field-compact">
          <label for="projection-select">星図投影法：</label>
          <select id="projection-select">
            <option value="aitoff">アイトフ投影（標準）</option>
            <option value="mollweide">モルワイデ投影</option>
            <option value="hammer">ハンマー投影</option>
            <option value="orthographic">正射投影</option>
            <option value="stereographic">ステレオグラフ投影</option>
            <!--<option value="gnomonic">グノモニック投影</option>-->
            <!--<option value="sinusoidal">サインスイダル投影</option>-->
            <!--<option value="albers">アルバース投影</option>-->
            <!--<option value="azimuthal equal area">方位等積投影</option>-->
            <!--<option value="azimuthal equidistant">方位等距離投影</option>-->
            <option value="mercator">メルカトル投影</option>
            <option value="equirectangular">正距円筒図法</option>
          </select>
        </div>

        <!-- 恒星の等級（視等級）表示上限 -->
        <div class="field field-compact">
          <label for="star-mag-limit">恒星等級：</label>
          <input id="star-mag-limit" type="range" min="-1" max="6" step="0.1" value="6" aria-label="恒星の視等級表示上限" />
          <output id="star-mag-limit-value" for="star-mag-limit">6.0等級</output>
        </div>

        <div class="field field-compact">
          <!-- 星図リセットボタン -->
          <button id="reset-view" type="button">星図表示リセット</button>
          <!-- 88星座表示ON/OFFチェックボックス -->
          <label for="toggle-constellations"><input type="checkbox" id="toggle-constellations" checked />88星座表示</label>
        </div>

        <hr />

        <h2>アイヌ民族星文化一覧</h2>
        <ul id="ainu-list" class="ainu-list">
          <li>……</li>
        </ul>
      </section>

      <section class="map-area">
        <!-- d3-celestial がここにキャンバスを作る -->
        <div id="celestial-map"></div>

        <!-- d3-celestial キャンバス下 note -->
        <p class="note">※ 星図上では紫/緑色でアイヌ民族の星文化を描画しています（一覧で選択すると黄色で強調表示）。</p>
        <!-- d3-celestial キャンバス下 attention -->
        <p class="attention">
          当サイトに掲載されている星図・星座線・星文化情報・地図情報など、すべてのコンテンツのダウンロードおよび無断複製（スクリーンショット等を含む）は固く禁止いたします。
          <br />ご利用を希望される場合は、必ず管理者：<a href="https://x.com/trapezium_orion" target="_blank" rel="noopener">@trapezium_orion (X/Twitter)</a>までお問い合わせください。 <br />&copy;
          2025–2026 Ainu Star Culture プロジェクト
        </p>
      </section>
    </main>

    <!-- d3-celestial 関連ライブラリ -->
    <script src="https://cdn.jsdelivr.net/npm/d3-celestial@0.7.35/lib/d3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-celestial@0.7.35/lib/d3.geo.projection.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-celestial@0.7.35/celestial.min.js"></script>

    <!-- 自前の JS -->
    <!-- キャッシュ更新用にバージョンを付与 -->
    <script src="js/dataLoader.js?v=2"></script>
    <script src="js/main.js?v=2"></script>
    <script src="js/includes.js?v=2"></script>
    <script src="js/contentProtection.js?v=1"></script>
  </body>
</html>
